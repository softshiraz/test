<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¬ Ø³Ø§ÙØª Ø´ÛŒØ±Ø§Ø² : SoftShiraz ğŸ¬</title>
    
    <meta name="description" content="@soft_shiraz - Ø³Ø§ÙØª Ø´ÛŒØ±Ø§Ø²">
    <meta name="theme-color" content="#ffd700">
    
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/dist/font-face.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    
    <link rel="manifest" href="/web/manifest.json">

    <style>
        /* Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø§ØµÙ„ÛŒ Ú©Ù‡ Ø¯Ø± Ù‡Ù…Ù‡ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ */
        :root {
            --color-primary: #ffd700;
            --color-secondary: #ffb300;
            --accent-text: #ffd700;
            --bg-color: #0e0e0f;
            --text-color: #fff;
            --header-bg: rgba(0,0,0,0.5);
            --border-color: rgba(48,48,48,0.5);
            --glow-color: rgba(255,215,0,0.5);
        }
        .light-mode {
            --color-primary: #4a90e2;
            --color-secondary: #357abd;
            --accent-text: #ffffff;
            --bg-color: #f8fbff;
            --text-color: #1a2b4b;
            --header-bg: rgba(255,255,255,0.92);
            --border-color: rgba(74,144,226,0.25);
            --glow-color: rgba(74,144,226,0.5);
        }
        * { margin:0; padding:0; box-sizing:border-box; -webkit-tap-highlight-color:transparent; }
        body {
            font-family: "Vazirmatn", sans-serif;
            background:var(--bg-color);
            color:var(--text-color);
            overflow-x:hidden;
            transition: background-color 0.3s, color 0.3s;
        }

        /* Ù„ÙˆØ¯ÛŒÙ†Ú¯ */
        #loading-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; background:var(--bg-color);
            display: flex; justify-content: center; align-items: center; z-index: 10000;
            opacity: 1; transition: opacity 0.9s ease;
        }
        #loading-overlay.hidden { opacity: 0; pointer-events: none; }
        .loader { position: relative; width: 40px; height: 40px; }
        .loader .circle { position: absolute; width: 38px; height: 38px; opacity: 0; transform: rotate(225deg); animation: orbit 5.5s infinite; }
        .loader .circle:after { content: ''; position: absolute; width: 5px; height: 5px; border-radius: 50%; background: var(--color-primary); }
        .loader .circle:nth-child(2) { animation-delay: 240ms; }
        .loader .circle:nth-child(3) { animation-delay: 480ms; }
        .loader .circle:nth-child(4) { animation-delay: 720ms; }
        .loader .circle:nth-child(5) { animation-delay: 960ms; }
        @keyframes orbit {
            0% { transform:rotate(225deg); opacity: 1; animation-timing-function: ease-out; }
            7% { transform:rotate(345deg); animation-timing-function: linear; }
            30% { transform:rotate(455deg); animation-timing-function: ease-in-out; }
            39% { transform:rotate(690deg); animation-timing-function: linear; }
            70% { transform:rotate(815deg); opacity: 1; animation-timing-function: ease-out; }
            75% { transform:rotate(945deg); animation-timing-function: ease-out; }
            76% { transform:rotate(945deg); opacity: 0; }
            100% { transform:rotate(945deg); opacity: 0; }
        }
    </style>
</head>
<body>
    <div id="loading-overlay">
        <div class="loader">
            <div class="circle"></div><div class="circle"></div><div class="circle"></div><div class="circle"></div><div class="circle"></div>
        </div>
    </div>

    <div id="header-root"></div>
    <div id="menu-root"></div>
    
    <main style="padding-top:0px;">
        <div id="hero-root"></div>
        <div id="cards-root"></div>
    </main>

    <div id="bg-root"></div>

    <script>
        async function loadComponent(id, url) {
            try {
                const response = await fetch(url);
                if (!response.ok) throw new Error(`Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª ${url}`);
                const html = await response.text();
                const container = document.getElementById(id);
                container.innerHTML = html;

                // Ø§Ø¬Ø±Ø§ÛŒ Ø§Ø³Ú©Ø±ÛŒÙ¾Øªâ€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ø®Ù„ ÙØ§ÛŒÙ„ HTML Ù„ÙˆØ¯ Ø´Ø¯Ù‡
                const scripts = container.querySelectorAll("script");
                scripts.forEach(oldScript => {
                    const newScript = document.createElement("script");
                    Array.from(oldScript.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value));
                    newScript.textContent = oldScript.textContent;
                    document.body.appendChild(newScript);
                });
            } catch (err) {
                console.error(err);
            }
        }

        // ØªØ±ØªÛŒØ¨ Ù„ÙˆØ¯: Ø§ÙˆÙ„ Ø¸Ø§Ù‡Ø±ØŒ Ø¨Ø¹Ø¯ Ø§Ø³Ú©Ø±ÛŒÙ¾Øªâ€ŒÙ‡Ø§
        window.addEventListener('DOMContentLoaded', async () => {
            await Promise.all([
                loadComponent('header-root', 'components/header.html'),
                loadComponent('menu-root', 'components/menu.html'),
                loadComponent('hero-root', 'components/hero.html'),
                loadComponent('cards-root', 'components/cards.html'),
                loadComponent('bg-root', 'components/background.html')
            ]);

            // Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ù„ÙˆØ¯ÛŒÙ†Ú¯ Ø¨Ø¹Ø¯ Ø§Ø² Ù„ÙˆØ¯ Ø´Ø¯Ù† Ù‡Ù…Ù‡ Ú†ÛŒØ²
            setTimeout(() => {
                document.getElementById('loading-overlay').classList.add('hidden');
            }, 500);
        });

        // Ø³Ø±ÙˆÛŒØ³ ÙˆØ±Ú©Ø±
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/web/sw.js', { scope: '/web/' })
                .catch(err => console.error('SW Error:', err));
            });
        }
    </script>
</body>
</html>
