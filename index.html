<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>سافت شیراز - اکران‌های آینده</title>

<link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/dist/font-face.css" rel="stylesheet">
<link rel="manifest" href="/manifest.json" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
/* ---------------- پایه ---------------- */
* { margin:0; padding:0; box-sizing:border-box; }
html,body { height:100%; }
body {
    font-family: "Vazirmatn", sans-serif;
    color:#fff;
    overflow-x:hidden;
    background: linear-gradient(45deg,#0e0e0f,#1a1a1a,#0e0e0f);
    background-size:400% 400%;
    animation: gradientEffect 15s ease infinite;
}
@keyframes gradientEffect {
    0% { background-position:0% 50%; }
    50% { background-position:100% 50%; }
    100% { background-position:0% 50%; }
}

/* ذرات طلایی DOM fallback */
#gold-particles { position: fixed; top:0; left:0; width:100%; height:100%; overflow:hidden; pointer-events:none; z-index:0; }

/* header */
header {
    background: rgba(0,0,0,0.45);
    backdrop-filter: blur(10px);
    padding:15px 25px;
    display:flex; justify-content:flex-end; align-items:center;
    border-bottom:1px solid rgba(48,48,48,0.5);
    position:sticky; top:0; z-index:10;
    text-shadow:0 0 10px rgba(255,215,0,0.25);
}
.logo-fa {
    font-weight:700;
    font-size:26px;
    background:linear-gradient(45deg,#ffd700,#ffb300);
    -webkit-background-clip:text;
    color:transparent;
}

/* main */
main { padding:35px 15px 60px; position:relative; z-index:2; }
h2 {
    color:#ffd700; font-size:28px; text-align:center;
    margin-bottom:35px; border-bottom:3px solid #ffd700;
    display:inline-block; padding-bottom:6px;
    text-shadow:0 0 8px rgba(255,215,0,0.3);
}

/* grid */
.section { text-align:center; }
.movies-grid {
    display:grid;
    grid-template-columns:repeat(4,1fr);
    gap:20px;
    justify-items:center;
    max-width:1200px;
    margin:0 auto;
}

/* کارت‌ها */
.movie-card { perspective:1200px; width:280px; }
.card-inner {
    position: relative;
    transition: transform 0.6s cubic-bezier(.2,.9,.2,1);
    transform-style: preserve-3d;
    cursor: pointer;
    width: 100%;
    height: 420px;
    border-radius:14px;
    transform-origin: center;
    will-change: transform;
    box-shadow: 0 8px 30px rgba(0,0,0,0.6), 0 0 18px rgba(255,215,0,0.03);
    border: 1px solid rgba(255,215,0,0.06);
    background: transparent;
}
.card-front, .card-back {
    position:absolute; inset:0;
    border-radius:14px;
    overflow:hidden;
    backface-visibility:hidden;
    background: rgba(19,19,20,0.55);
    backdrop-filter: blur(8px);
    border:1px solid rgba(34,34,34,0.45);
    display:flex; flex-direction:column;
}
.card-front { z-index:2; transform: translateZ(30px); }
.card-back { transform: rotateY(180deg); padding:18px; text-align:right; color:#fff; }

/* تصویر */
.img-bar { flex:1; width:100%; overflow:hidden; }
.img-bar img { width:100%; height:100%; object-fit:cover; display:block; }

/* تاریخ/عنوان/رزرو */
.date-bar, .title-bar, .reserve-bar {
    height:44px; line-height:44px;
    padding:0 12px; text-align:center;
    background: rgba(0,0,0,0.28);
    border-top:1px solid rgba(255,255,255,0.03);
    font-size:14px;
}
.date-bar { color:#ffd700; font-weight:700; text-shadow:0 0 6px rgba(255,215,0,0.15); }
.title-bar { color:#fff; font-weight:600; }
.reserve-bar { 
    color:#000; background:#ffd700; font-weight:800; cursor:pointer; user-select:none;
    display:flex; justify-content:center; align-items:center; gap:8px;
    border-bottom-left-radius:12px; border-bottom-right-radius:12px;
    position:relative; overflow:visible;
    animation: pulseReserve 3s infinite;
    box-shadow: 0 6px 20px rgba(255,183,30,0.08), 0 0 18px rgba(255,215,0,0.08);
}
.reserve-bar .ring { position:absolute; inset:-8px -10px auto auto; width:20px; height:20px; border-radius:50%; background:rgba(255,255,255,0.06); transform:scale(.9); filter:blur(6px); }
@keyframes pulseReserve {
  0% { transform: translateY(0) scale(1); }
  50% { transform: translateY(-2px) scale(1.01); }
  100% { transform: translateY(0) scale(1); }
}

/* کارت flip */
.card-inner.flipped { transform: rotateY(180deg) translateZ(0); }
.card-appear { opacity:0; transform: translateY(18px) scale(.99); transition: opacity .6s ease, transform .6s cubic-bezier(.2,.9,.2,1); }
.card-appear.visible { opacity:1; transform: translateY(0) scale(1); }

/* footer */
footer {
    background: rgba(0,0,0,0.45);
    backdrop-filter: blur(10px);
    padding:35px 20px; text-align:center;
    border-top:1px solid rgba(48,48,48,0.5);
    margin-top:60px;
    text-shadow: 0 0 10px rgba(255,215,0,0.25);
    position:relative; z-index:2;
}
.footer-title { font-size:18px; color:#ffd700; margin-bottom:18px; }
.social-row { display:flex; justify-content:center; gap:18px; align-items:center; }

/* آیکون‌های بامزه */
.social-icon { width:56px; height:56px; border-radius:12px; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); display:flex; align-items:center; justify-content:center; color:#ffd700; font-size:22px; text-decoration:none; border:1px solid rgba(255,215,0,0.06); transition: transform .18s ease, background .18s ease; pointer-events:auto; }
.social-icon:hover { transform: translateY(-6px); background: rgba(255,215,0,0.08); color:#000; }

/* About popup */
#about-overlay { position:fixed; inset:0; background: rgba(0,0,0,0.55); display:none; align-items:center; justify-content:center; z-index:1000; }
#about-overlay.show { display:flex; }
#about-popup { width: min(720px, 94%); max-height:88vh; overflow:auto; background: rgba(12,12,12,0.9); backdrop-filter: blur(12px); border-radius:14px; border:2px solid rgba(255,215,0,0.35); padding:20px; text-align:right; color:#fff; box-shadow:0 20px 60px rgba(0,0,0,0.6); position:relative; }
#about-popup .close-btn { position:absolute; left:16px; top:16px; background:transparent; color:#ffd700; border:1px solid rgba(255,215,0,0.12); padding:8px 10px; border-radius:10px; cursor:pointer; }
#about-popup img { width:140px; height:140px; object-fit:cover; border-radius:12px; float:left; margin-left:18px; box-shadow:0 10px 30px rgba(0,0,0,0.6); border:1px solid rgba(255,215,0,0.06); }
#about-popup h3 { color:#ffd700; margin-bottom:8px; }
#about-popup p { line-height:1.7; color:#ddd; }
#about-links { display:flex; gap:12px; margin-top:12px; flex-wrap:wrap; justify-content:flex-start; }

/* loader */
#loading-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background:#111; display:flex; justify-content:center; align-items:center; z-index:2000; opacity:1; transition:opacity .5s ease; }
#loading-overlay.hidden { opacity:0; pointer-events:none; }

/* responsive */
@media (max-width:1200px) { .movies-grid{grid-template-columns:repeat(3,1fr);} }
@media (max-width:768px)  { .movies-grid{grid-template-columns:repeat(2,1fr);} #about-popup img{display:none;} }
@media (max-width:480px)  { .movies-grid{grid-template-columns:1fr;} header{padding:12px;} .logo-fa{font-size:20px;} }
</style>
</head>
<body>

<!-- ذرات طلایی -->
<div id="gold-particles"></div>

<!-- لودر -->
<div id="loading-overlay">
  <div class="loader" aria-hidden="true">
    <svg width="60" height="60" viewBox="0 0 100 100">
      <circle cx="50" cy="50" r="20" stroke="#ffd700" stroke-width="6" fill="none" stroke-linecap="round">
        <animate attributeName="stroke-dasharray" values="1,200;89,200;89,200" dur="1.8s" repeatCount="indefinite"/>
        <animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="1.2s" repeatCount="indefinite"/>
      </circle>
    </svg>
  </div>
</div>

<header><div class="logo-fa">Soft Shiraz</div></header>

<main>
  <section class="section">
    <h2 class="golden-glow">اکران‌های آینده</h2>
    <div class="movies-grid" id="cards-container" aria-live="polite"></div>
  </section>
</main>

<footer>
  <div class="footer-title">شبکه‌های اجتماعی سافت شیراز</div>
  <div class="social-row">
    <a class="social-icon" href="https://t.me/softshiraz" target="_blank"><i class="fab fa-telegram"></i></a>
    <a class="social-icon" href="https://instagram.com/softshiraz" target="_blank"><i class="fab fa-instagram"></i></a>
    <button class="social-icon" id="about-btn"><i class="fas fa-info"></i></button>
  </div>

  <div id="about-overlay">
    <div id="about-popup">
      <button class="close-btn" id="about-close">بستن</button>
      <img src="https://picsum.photos/140" alt="Soft Shiraz">
      <h3>دربارهٔ سافت شیراز</h3>
      <p>سافت شیراز مرجع معرفی فیلم‌های آینده و اخبار سینما است. تاریخچه: از سال ۱۴۰۰ شروع کردیم.</p>
      <div id="about-links">
        <a class="holo-btn" href="https://t.me/softshiraz" target="_blank">تلگرام ما</a>
        <a class="holo-btn" href="https://instagram.com/softshiraz" target="_blank">اینستاگرام</a>
      </div>
    </div>
  </div>
</footer>

<script>
// ذرات طلایی
const particleContainer = document.getElementById("gold-particles");
for (let i = 0; i < 60; i++) {
  const p = document.createElement("div");
  p.className = "particle";
  const size = Math.random()*3+2;
  p.style.width = size+"px";
  p.style.height = size+"px";
  p.style.left = Math.random()*100+"%";
  p.style.top = Math.random()*-100+"vh";
  p.style.position="absolute";
  p.style.background="rgba(255,215,0,0.8)";
  p.style.borderRadius="50%";
  p.style.boxShadow="0 0 6px rgba(255,215,0,0.9)";
  p.style.animation=`floatDown ${Math.random()*4+4}s linear ${Math.random()*3}s infinite`;
  particleContainer.appendChild(p);
}
const styleEl = document.createElement('style');
styleEl.innerHTML = `
@keyframes floatDown {
  from { transform: translateY(-120vh); opacity:1; }
  to { transform: translateY(120vh); opacity:0; }
}`;
document.head.appendChild(styleEl);

// لودر
window.addEventListener('load', ()=>{ setTimeout(()=>{ document.getElementById('loading-overlay').classList.add('hidden'); },900); });

// کارت‌ها
const container = document.getElementById("cards-container");
let openCard = null;
async function loadCardsStrictly() {
  for (let num=1; num<=12; num++) {
    const cardWrapper = document.createElement("div");
    cardWrapper.className="movie-card card-appear";
    cardWrapper.innerHTML = `<div class="card-inner">
      <div class="card-front">
        <div class="img-bar"><img src="https://picsum.photos/seed/${num}/640/480" alt="poster"></div>
        <div class="date-bar golden-glow">تاریخ: نامعلوم</div>
        <div class="title-bar">فیلم ${num}</div>
        <div class="reserve-bar">رزرو بلیط<div class="ring"></div></div>
      </div>
      <div class="card-back"><h3>جزئیات</h3><p>اطلاعات متنی فیلم ${num}.</p></div>
    </div>`;
    container.appendChild(cardWrapper);

    // جلوگیری از چرخش کارت هنگام رزرو
    const reserveButton = cardWrapper.querySelector(".reserve-bar");
    if(reserveButton){reserveButton.addEventListener("click",e=>{
      e.stopPropagation();
      reserveButton.animate([{transform:'scale(1)'},{transform:'scale(.96)'},{transform:'scale(1)'}],{duration:260,easing:'ease-out'});
      window.open("https://t.me/softshiraz","_blank");
    });}

    observeAppearance(cardWrapper);
  }
}
function observeAppearance(el){
  el.classList.remove('visible');
  if(!('IntersectionObserver' in window)){el.classList.add('visible'); return;}
  const io = new IntersectionObserver((entries,obs)=>{
    entries.forEach(entry=>{ if(entry.isIntersecting){ entry.target.classList.add('visible'); obs.unobserve(entry.target); }});
  },{threshold:0.12});
  io.observe(el);
}
loadCardsStrictly();

// flip کارت‌ها
document.addEventListener("click",function(e){
  const cardInner=e.target.closest(".card-inner");
  if(cardInner){
    if(e.target.closest('.reserve-bar')) return;
    if(openCard && openCard!==cardInner) openCard.classList.remove("flipped");
    cardInner.classList.toggle("flipped");
    openCard = cardInner.classList.contains("flipped")?cardInner:null;
  }
});

// popup درباره ما
const aboutBtn=document.getElementById("about-btn");
const aboutOverlay=document.getElementById("about-overlay");
const aboutClose=document.getElementById("about-close");
aboutBtn.addEventListener("click",()=>{aboutOverlay.classList.toggle('show');});
aboutClose.addEventListener('click',()=>{aboutOverlay.classList.remove('show');});
aboutOverlay.addEventListener('click',e=>{if(e.target===aboutOverlay) aboutOverlay.classList.remove('show');});
</script>

</body>
</html>
