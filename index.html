<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Horizontal Infinite Scroll</title>

<style>
    body {
        background: #111;
        color: #fff;
        font-family: sans-serif;
        margin: 0;
        padding: 0;
    }

    h2 {
        margin: 20px;
        font-size: 24px;
        color: gold;
    }

    /* کانتینر لیست کارت‌ها */
    .loop-container {
        width: 100%;
        overflow: hidden;
        position: relative;
        padding: 20px 0;
    }

    .loop-track {
        display: flex;
        gap: 20px;
        white-space: nowrap;
        will-change: transform;
    }

    .card {
        min-width: 250px;
        height: 350px;
        background: #222;
        border-radius: 12px;
        border: 2px solid gold;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 28px;
        flex-shrink: 0;
    }
</style>
</head>
<body>

<!-- ==== اکران‌های آینده ==== -->
<h2>اکران‌های آینده</h2>
<div class="loop-container">
    <div class="loop-track" id="future-track">

        <!-- کارت نمونه — می‌توانی عکس، نام فیلم، توضیح و... بگذاری -->
        <div class="card">A1</div>
        <div class="card">A2</div>
        <div class="card">A3</div>
        <div class="card">A4</div>
        <div class="card">A5</div>

    </div>
</div>

<!-- ==== اکران شده‌ها ==== -->
<h2>اکران شده‌ها</h2>
<div class="loop-container">
    <div class="loop-track" id="past-track">

        <div class="card">B1</div>
        <div class="card">B2</div>
        <div class="card">B3</div>
        <div class="card">B4</div>
        <div class="card">B5</div>

    </div>
</div>


<script>

/* ------------------------------
   تابع ساخت اسکرول اتوماتیک + Drag
-------------------------------- */
function createInfiniteScroll(trackId, speed = 1) {

    const track = document.getElementById(trackId);
    let pos = 0;
    let isDown = false;
    let startX;

    // اسکرول اتوماتیک بدون باگ
    function autoScroll() {
        pos -= speed;
        track.style.transform = `translateX(${pos}px)`;

        const firstCard = track.children[0];
        const cardWidth = firstCard.offsetWidth + 20;

        if (Math.abs(pos) >= cardWidth) {
            track.appendChild(firstCard);
            pos += cardWidth;
        }

        requestAnimationFrame(autoScroll);
    }
    autoScroll();


    // Drag با موس
    track.addEventListener("mousedown", e => {
        isDown = true;
        startX = e.pageX;
    });

    window.addEventListener("mouseup", () => isDown = false);

    track.addEventListener("mousemove", e => {
        if (!isDown) return;
        let walk = (e.pageX - startX) * 1.3;
        pos += walk;
        startX = e.pageX;
    });

    // لمس موبایل
    track.addEventListener("touchstart", e => {
        isDown = true;
        startX = e.touches[0].pageX;
    }, { passive: true });

    track.addEventListener("touchend", () => isDown = false);

    track.addEventListener("touchmove", e => {
        if (!isDown) return;
        let walk = (e.touches[0].pageX - startX) * 1.3;
        pos += walk;
        startX = e.touches[0].pageX;
    }, { passive: true });
}


/* ---- اجرای اسکرول برای دو لیست ---- */
createInfiniteScroll("future-track", 1);
createInfiniteScroll("past-track", 0.8);

</script>

</body>
</html>
