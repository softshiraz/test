<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Soft Shiraz - اکران‌های آینده</title>

<link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/dist/font-face.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
*{margin:0;padding:0;box-sizing:border-box;}
body {
    font-family:"Vazirmatn",sans-serif;
    transition: background 0.3s, color 0.3s;
}

/* ------------------------
      تم شماره ۱ (مشکی طلایی)
--------------------------*/
body.theme-dark {
    background:#0e0e0f;
    color:#fff;
}
body.theme-dark header, 
body.theme-dark footer {
    background:#000;
    border-color:#333;
}
body.theme-dark h2 { color:#ffd700; border-color:#ffd700; }
body.theme-dark .logo-fa {
    background:linear-gradient(45deg,#ffd700,#ffb300);
    -webkit-background-clip:text;
    color:transparent;
}

body.theme-dark .movie-card .card-front,
body.theme-dark .card-back { background:#131314; color:#fff; }
body.theme-dark .date-bar{color:#ffd700;}
body.theme-dark .reserve-bar{background:#ffd700;color:#000;}
body.theme-dark .social-icon{background:#1a1a1a;color:#ffd700;}
body.theme-dark .social-icon:hover{background:#ffd700;color:#000;}

body.theme-dark #about-popup {
    background:#111;
    border-color:#ffd700;
    color:#fff;
}

/* ------------------------
      تم شماره ۲ (کرمی – قرمز – آبی تیره)
--------------------------*/
body.theme-light {
    background:#f2e9da;
    color:#222;
}
body.theme-light header, 
body.theme-light footer {
    background:#102030;
    border-color:#304060;
}
body.theme-light h2 { color:#c62828; border-color:#c62828; }
body.theme-light .logo-fa { color:#fff; }

body.theme-light .card-front{
    background:#fff3e0;
    color:#222;
}
body.theme-light .card-back{
    background:#ffe9d6;
    color:#222;
}

body.theme-light .date-bar{ color:#c62828; }
body.theme-light .reserve-bar{ background:#c62828;color:#fff; }
body.theme-light .social-icon{ background:#d7ccc8;color:#102030; }
body.theme-light .social-icon:hover{ background:#102030;color:#fff; }

body.theme-light #about-popup {
    background:#fffefa;
    border-color:#c62828;
    color:#102030;
}

/* ----------------------
   ساختار عمومی
-----------------------*/
header {
    padding:15px 25px;
    display:flex; justify-content:flex-end;
    align-items:center;
    border-bottom:1px solid;
    position:sticky;top:0;z-index:999;
}
.logo-fa{
    font-size:26px; font-weight:700;
}

main{padding:30px 15px 60px;}
.section{text-align:center;}
h2{
    font-size:28px;
    margin-bottom:35px;
    display:inline-block;
    padding-bottom:6px;
    border-bottom:3px solid;
}

.movies-grid {
    display:grid;
    grid-template-columns:repeat(4,1fr);
    gap:20px;
    justify-items:center;
    max-width:1200px;
    margin:0 auto;
}

.movie-card { 
    perspective:1000px;
    opacity:0;
    transform:translateY(60px);
    transition: all 0.7s ease-out;
}
.movie-card.show {
    opacity:1;
    transform:translateY(0);
}

.card-inner{
    width:280px;height:420px;
    position:relative;
    transform-style:preserve-3d;
    transition:transform .3s;
    cursor:pointer;
}
.card-inner.flipped{transform:rotateY(180deg);}

.card-front,.card-back{
    width:100%;height:100%;
    position:absolute;top:0;left:0;
    backface-visibility:hidden;
    border-radius:14px;
    overflow:hidden;
    border:1px solid #222;
}

.card-back{transform:rotateY(180deg);padding:15px;}

.img-bar{flex:1;width:100%;overflow:hidden;}
.img-bar img{width:100%;height:100%;object-fit:cover;}

.date-bar,.title-bar,.reserve-bar{
    height:36px;line-height:36px;font-size:14px;
    text-align:center;
    white-space:nowrap;text-overflow:ellipsis;
    overflow:hidden;
    border-top:1px solid rgba(255,255,255,0.2);
}

footer{
    padding:30px 20px;
    border-top:1px solid;
    margin-top:40px;
    text-align:center;
}
.footer-title{margin-bottom:18px;font-size:18px;}

.social-row{display:flex;gap:18px;justify-content:center;}
.social-icon{
    width:48px;height:48px;border-radius:50%;
    display:flex;align-items:center;justify-content:center;
    transition:0.3s;cursor:pointer;
}

/* دکمه تغییر تم */
.theme-toggle {
    width:48px;height:48px;
    border-radius:50%;
    display:flex;align-items:center;justify-content:center;
    cursor:pointer;
    font-size:22px;
}

/* پاپ آپ درباره ما */
#about-popup{
    display:none;opacity:0;
    position:fixed;top:50%;left:50%;
    transform:translate(-50%,-50%);
    width:300px;padding:20px;
    border:2px solid;border-radius:12px;
    transition:opacity .3s;
    z-index:2000;
}
#about-popup.show{display:block;opacity:1;}

/* ریسپانسیو */
@media(max-width:1200px){.movies-grid{grid-template-columns:repeat(3,1fr);} }
@media(max-width:768px){.movies-grid{grid-template-columns:repeat(2,1fr);} }
@media(max-width:480px){.movies-grid{grid-template-columns:1fr;} }
</style>
</head>

<body class="theme-dark">

<header>
    <div class="logo-fa">Soft Shiraz</div>
</header>

<main>
<section class="section">
    <h2>اکران‌های آینده</h2>
    <div class="movies-grid" id="cards-container"></div>
</section>
</main>

<footer>
    <div class="footer-title">شبکه‌های اجتماعی سافت شیراز</div>
    <div class="social-row">

        <a class="social-icon" href="https://t.me/softshiraz" target="_blank">
            <i class="fab fa-telegram"></i>
        </a>

        <a class="social-icon" href="https://instagram.com/softshiraz" target="_blank">
            <i class="fab fa-instagram"></i>
        </a>

        <!-- دکمه تغییر تم -->
        <div class="theme-toggle social-icon" id="theme-btn">
            <i class="fas fa-adjust"></i>
        </div>

        <!-- درباره ما -->
        <div class="social-icon" id="about-btn">
            <i class="fas fa-info"></i>
        </div>
    </div>

    <div id="about-popup">
        <strong>درباره ما</strong>
        <p>
        سافت شیراز جاییه که عاشقای فیلم همیشه زودتر از بقیه باخبر می‌شن!  
        اینجا از جدیدترین اکران‌ها تا اتفاقای خفن سینما هر چی بخوای پیدا می‌کنی.  
        </p>
    </div>
</footer>

<script>
/* --------------------
   رفرش خودکار هنگام ورود
---------------------*/
if (!sessionStorage.getItem("reloaded")) {
    sessionStorage.setItem("reloaded", "yes");
    location.reload();
}

/* --------------------
   لود کارت‌ها به ترتیب
---------------------*/
const container = document.getElementById("cards-container");
let openCard = null;

async function loadCardsStrictly() {
    for (let i = 1; i <= 12; i++) {
        const res = await fetch(`cards/${i}.html`, { cache:"no-store" });
        if (!res.ok) continue;

        const html = await res.text();
        const card = document.createElement("div");
        card.className = "movie-card";
        card.innerHTML = html;
        container.appendChild(card);

        const reserveButton = card.querySelector(".reserve-bar");
        if (reserveButton) {
            reserveButton.onclick = () => location.href = "https://t.me/softshiraz";
        }

        /* اسکرول افکت */
        setTimeout(() => card.classList.add("show"), i * 150);
    }
}
loadCardsStrictly();

/* --------------------
   کارت برگردان
---------------------*/
document.addEventListener("click", e => {
    const item = e.target.closest(".card-inner");
    if (!item) return;

    if (openCard && openCard !== item) openCard.classList.remove("flipped");
    item.classList.toggle("flipped");
    openCard = item.classList.contains("flipped") ? item : null;
});

/* --------------------
   درباره ما
---------------------*/
const aboutBtn = document.getElementById("about-btn");
const aboutPopup = document.getElementById("about-popup");

aboutBtn.onclick = e => {
    e.stopPropagation();
    aboutPopup.classList.toggle("show");
};

document.addEventListener("click", e => {
    if (!aboutPopup.contains(e.target) && e.target !== aboutBtn) {
        aboutPopup.classList.remove("show");
    }
});

/* --------------------
   تغییر تم
---------------------*/
const themeBtn = document.getElementById("theme-btn");

themeBtn.onclick = () => {
    document.body.classList.toggle("theme-dark");
    document.body.classList.toggle("theme-light");
};
</script>

</body>
</html>