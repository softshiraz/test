<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¬ Ø³Ø§ÙØª Ø´ÛŒØ±Ø§Ø² : SoftShiraz ğŸ¬</title>

    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/dist/font-face.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <style>
        :root {
            --color-primary: #ffd700;
            --color-secondary: #ffb300;
            --bg-color: #0e0e0f;
            --text-color: #fff;
            --header-bg: rgba(0,0,0,0.5);
            --border-color: rgba(48,48,48,0.5);
            --glow-color: rgba(255,215,0,0.5);
        }
        .light-mode {
            --color-primary: #4a90e2;
            --bg-color: #f8fbff;
            --text-color: #1a2b4b;
            --header-bg: rgba(255,255,255,0.92);
            --border-color: rgba(74,144,226,0.25);
            --glow-color: rgba(74,144,226,0.5);
        }
        * { margin:0; padding:0; box-sizing:border-box; }
        body { font-family: "Vazirmatn", sans-serif; background:var(--bg-color); color:var(--text-color); overflow-x:hidden; transition: 0.3s; }

        /* Ø§Ø³ØªØ§ÛŒÙ„ Ù‡Ø¯Ø± (Ù…Ø³ØªÙ‚ÛŒÙ… Ø¯Ø± ÙØ§ÛŒÙ„) */
        header {
            background: var(--header-bg); backdrop-filter: blur(10px);
            padding:15px 25px; display:flex; justify-content:space-between; align-items:center;
            border-bottom:1px solid var(--border-color); position:sticky; top:0; z-index:100;
        }
        .logo-fa { font-weight:700; font-size:26px; color: var(--color-primary); text-decoration:none; }
        .hamburger-btn {
            width:48px; height:48px; background: rgba(255,255,255,0.05); border-radius:12px;
            border: 2px solid var(--border-color); color: var(--color-primary); cursor:pointer;
        }

        /* Ø§Ø³ØªØ§ÛŒÙ„ Ù…Ù†Ùˆ (Ù…Ø³ØªÙ‚ÛŒÙ… Ø¯Ø± ÙØ§ÛŒÙ„) */
        #side-menu {
            position: fixed; top: 0; right: 0; height: 100vh; width: 300px;
            background: var(--bg-color); border-left: 1px solid var(--border-color);
            transform: translateX(100%); transition: 0.4s; z-index: 200; padding: 20px;
        }
        #side-menu.open { transform: translateX(0); }
        #menu-backdrop { position:fixed; inset:0; background:rgba(0,0,0,0.6); display:none; z-index:150; }
        
        /* Ù„ÙˆØ¯Ø± ØµÙØ­Ù‡ */
        #loading-overlay {
            position: fixed; inset: 0; background: var(--bg-color);
            display: flex; justify-content: center; align-items: center; z-index: 1000;
        }
        .hidden { opacity: 0; pointer-events: none; transition: 0.5s; }
    </style>
</head>
<body>

    <div id="loading-overlay">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</div>

    <header>
        <button class="hamburger-btn" id="hamburger"><i class="fas fa-bars"></i></button>
        <a href="#" class="logo-fa">Soft Shiraz</a>
    </header>

    <div id="menu-backdrop"></div>
    <nav id="side-menu">
        <button id="menu-close" style="background:none; border:none; color:var(--color-primary); font-size:20px; cursor:pointer;"><i class="fas fa-times"></i></button>
        <div style="margin-top:30px; display:flex; flex-direction:column; gap:15px;">
            <button id="theme-toggle" style="padding:10px; cursor:pointer;">ØªØºÛŒÛŒØ± ØªÙ…</button>
            <a href="#" style="color:var(--text-color); text-decoration:none;">ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ</a>
            <a href="#" style="color:var(--text-color); text-decoration:none;">Ø§ÛŒÙˆÙ†Øªâ€ŒÙ‡Ø§</a>
        </div>
    </nav>

    <main>
        <div id="hero-root"></div>
        <div id="cards-root"></div>
    </main>

    <canvas id="bg-canvas" style="position:fixed; inset:0; z-index:-1; pointer-events:none;"></canvas>

    <script>
        // --- ØªØ§Ø¨Ø¹ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø± Ú©Ø§Ù…Ù¾ÙˆÙ†Ù†Øªâ€ŒÙ‡Ø§ÛŒ Ø®Ø§Ø±Ø¬ÛŒ (Hero Ùˆ Cards) ---
        async function loadComponent(id, url) {
            try {
                const response = await fetch(url);
                if (!response.ok) return;
                const html = await response.text();
                const container = document.getElementById(id);
                container.innerHTML = html;

                // Ø§Ø¬Ø±Ø§ÛŒ Ø§Ø³Ú©Ø±ÛŒÙ¾Øªâ€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ø®Ù„ ÙØ§ÛŒÙ„ Ù„ÙˆØ¯ Ø´Ø¯Ù‡
                const scripts = container.querySelectorAll("script");
                scripts.forEach(oldScript => {
                    const newScript = document.createElement("script");
                    newScript.textContent = oldScript.textContent;
                    document.body.appendChild(newScript);
                });
            } catch (err) { console.error(err); }
        }

        // --- Ø§Ø¬Ø±Ø§ÛŒ Ù„ÙˆØ¯Ø± Ø¨Ø±Ø§ÛŒ Hero Ùˆ Cards ---
        window.addEventListener('DOMContentLoaded', async () => {
            await Promise.all([
                loadComponent('hero-root', 'components/hero.html'),
                loadComponent('cards-root', 'components/cards.html')
            ]);
            document.getElementById('loading-overlay').classList.add('hidden');
        });

        // --- Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ù†Ùˆ Ùˆ ØªÙ… ---
        const hamburger = document.getElementById('hamburger');
        const sideMenu = document.getElementById('side-menu');
        const backdrop = document.getElementById('menu-backdrop');
        const closeBtn = document.getElementById('menu-close');
        const themeBtn = document.getElementById('theme-toggle');

        hamburger.onclick = () => { sideMenu.classList.add('open'); backdrop.style.display = 'block'; };
        closeBtn.onclick = () => { sideMenu.classList.remove('open'); backdrop.style.display = 'none'; };
        backdrop.onclick = closeBtn.onclick;

        themeBtn.onclick = () => {
            document.body.classList.toggle('light-mode');
            localStorage.setItem('theme', document.body.classList.contains('light-mode') ? 'light' : 'dark');
        };

        // --- Ú©Ø¯ Ø¨Ú©â€ŒÚ¯Ø±Ø§Ù†Ø¯ (Background Logic) ---
        const canvas = document.getElementById('bg-canvas');
        const ctx = canvas.getContext('2d');
        let w, h;
        function resize() { w = canvas.width = innerWidth; h = canvas.height = innerHeight; }
        window.onresize = resize; resize();

        function animate() {
            ctx.clearRect(0,0,w,h);
            ctx.fillStyle = document.body.classList.contains('light-mode') ? 'rgba(74,144,226,0.1)' : 'rgba(255,215,0,0.1)';
            // (Ø¯Ø± Ø§ÛŒÙ†Ø¬Ø§ Ú©Ø¯Ù‡Ø§ÛŒ Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ø°Ø±Ø§Øª Ú©Ù‡ Ù‚Ø¨Ù„Ø§ Ø¯Ø§Ø´ØªÛŒØ¯ Ù‚Ø±Ø§Ø± Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ø¯)
            ctx.fillRect(Math.random()*w, Math.random()*h, 2, 2);
            requestAnimationFrame(animate);
        }
        animate();
    </script>
</body>
</html>
