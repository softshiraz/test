<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¬ Ø³Ø§ÙØª Ø´ÛŒØ±Ø§Ø² : SoftShiraz ğŸ¬</title>
    
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/dist/font-face.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    
    <style>
        /* --- ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø±ÙˆØª Ùˆ Ù…ØªØºÛŒØ±Ù‡Ø§ --- */
        :root {
            --color-primary: #ffd700;
            --color-secondary: #ffb300;
            --accent-text: #ffd700;
            --bg-color: #0e0e0f;
            --text-color: #fff;
            --header-bg: rgba(0,0,0,0.5);
            --border-color: rgba(48,48,48,0.5);
            --menu-bg-start: rgba(12,12,12,0.98);
            --menu-bg-end: rgba(20,20,20,0.98);
            --link-bg: rgba(255,255,255,0.03);
            --glow-color: rgba(255,215,0,0.5);
        }
        .light-mode {
            --color-primary: #4a90e2;
            --color-secondary: #357abd;
            --accent-text: #ffffff;
            --bg-color: #f8fbff;
            --text-color: #1a2b4b;
            --header-bg: rgba(255,255,255,0.92);
            --border-color: rgba(74,144,226,0.25);
            --menu-bg-start: rgba(248,251,255,0.98);
            --menu-bg-end: rgba(240,245,255,0.98);
            --link-bg: rgba(74,144,226,0.08);
            --glow-color: rgba(74,144,226,0.5);
        }

        * { margin:0; padding:0; box-sizing:border-box; }
        body {
            font-family: "Vazirmatn", sans-serif;
            background: var(--bg-color);
            color: var(--text-color);
            overflow-x: hidden;
            transition: background-color 0.3s, color 0.3s;
        }

        /* --- Ø§Ø³ØªØ§ÛŒÙ„ Ø§ØµÙ„Ø§Ø­ Ø´Ø¯Ù‡ HEADER --- */
        header {
            background: var(--header-bg);
            backdrop-filter: blur(10px);
            padding: 15px 25px;
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid var(--border-color);
            position: sticky; top: 0; z-index: 100;
        }
        .logo-fa {
            font-weight: 700; font-size: 26px;
            background: linear-gradient(45deg, var(--color-primary), var(--color-secondary));
            -webkit-background-clip: text; color: transparent; text-decoration: none;
        }
        .hamburger-btn {
            width: 48px; height: 48px; display: flex; align-items: center; justify-content: center;
            background: var(--link-bg); border-radius: 14px; border: 2px solid var(--border-color);
            cursor: pointer; transition: 0.3s; color: var(--color-primary);
        }

        /* --- Ø§Ø³ØªØ§ÛŒÙ„ Ø§ØµÙ„Ø§Ø­ Ø´Ø¯Ù‡ MENU --- */
        #side-menu {
            position: fixed; top: 0; right: 0; height: 100vh; width: 320px; max-width: 85%;
            background: linear-gradient(180deg, var(--menu-bg-start), var(--menu-bg-end));
            transform: translateX(100%); transition: transform 0.32s cubic-bezier(.2,.9,.2,1);
            z-index: 1001; padding: 28px; display: flex; flex-direction: column; gap: 18px;
            border-left: 1px solid var(--border-color);
        }
        #side-menu.open { transform: translateX(0); }
        #menu-backdrop {
            position: fixed; inset: 0; background: rgba(0,0,0,0.55);
            opacity: 0; pointer-events: none; transition: 0.28s; z-index: 1000;
        }
        #menu-backdrop.visible { opacity: 1; pointer-events: auto; }
        .side-links a {
            display: flex; align-items: center; justify-content: space-between;
            padding: 12px 14px; border-radius: 10px; text-decoration: none;
            color: var(--text-color); background: var(--link-bg); transition: 0.3s;
        }
        .side-links a:hover { color: var(--color-primary); background: rgba(255,215,0,0.06); }

        /* Ù„ÙˆØ¯ÛŒÙ†Ú¯ */
        #loading-overlay {
            position: fixed; inset: 0; background: var(--bg-color);
            display: flex; justify-content: center; align-items: center; z-index: 9999;
        }
        #loading-overlay.hidden { opacity: 0; pointer-events: none; transition: 0.6s; }
    </style>
</head>
<body>

    <div id="loading-overlay">
        <div style="color: var(--color-primary); font-weight: bold;">Ù„Ø·ÙØ§ ØµØ¨Ø± Ú©Ù†ÛŒØ¯...</div>
    </div>

    <header>
        <button class="hamburger-btn" id="hamburger">
            <i class="fas fa-bars"></i>
        </button>
        <a href="#" class="logo-fa">Soft Shiraz</a>
    </header>

    <div id="menu-backdrop"></div>
    <nav id="side-menu">
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <button id="menu-close" style="background:none; border:none; color:var(--color-primary); font-size:24px; cursor:pointer;"><i class="fas fa-times"></i></button>
            <button id="theme-toggle" style="background:none; border:none; color:var(--color-primary); font-size:22px; cursor:pointer;"><i class="fas fa-sun"></i></button>
        </div>
        <div class="side-links" style="margin-top:20px; display:flex; flex-direction:column; gap:10px;">
            <a href="#">Ø§ÛŒÙˆÙ†Øªâ€ŒÙ‡Ø§ÛŒ Ú©ØªØ§Ø¨Ø®ÙˆØ§Ù†ÛŒ <i class="fas fa-chevron-left" style="font-size:12px;"></i></a>
            <a href="#">Ø§ØªØ§Ù‚Ú© <i class="fas fa-chevron-left" style="font-size:12px;"></i></a>
            <a href="#">Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù…Ø§ <i class="fas fa-chevron-left" style="font-size:12px;"></i></a>
        </div>
        <div style="margin-top:auto; text-align:center; font-size:12px; opacity:0.6;">Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ ØªÙˆØ³Ø· ÙÙ„ÙˆÚ©ÛŒ</div>
    </nav>

    <main>
        <div id="hero-root"></div>
        <div id="cards-root"></div>
    </main>

    <canvas id="bg-canvas" style="position:fixed; inset:0; z-index:-1; pointer-events:none;"></canvas>

    <script>
        // --- ØªØ§Ø¨Ø¹ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú©Ø§Ù…Ù¾ÙˆÙ†Ù†Øªâ€ŒÙ‡Ø§ ---
        async function loadComponent(id, url) {
            try {
                const response = await fetch(url);
                if (!response.ok) return;
                const html = await response.text();
                const container = document.getElementById(id);
                container.innerHTML = html;
                const scripts = container.querySelectorAll("script");
                scripts.forEach(oldScript => {
                    const newScript = document.createElement("script");
                    newScript.textContent = oldScript.textContent;
                    document.body.appendChild(newScript);
                });
            } catch (err) { console.error(err); }
        }

        // --- Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ (Background Logic) ---
        const canvas = document.getElementById('bg-canvas');
        const ctx = canvas.getContext('2d');
        let w, h, particles = [], N = 120;
        function resize() { w = canvas.width = innerWidth; h = canvas.height = innerHeight; }
        window.onresize = resize; resize();

        for(let i=0; i<N; i++) {
            particles.push({
                x: Math.random()*w, y: Math.random()*h,
                vx: Math.random()*0.5-0.25, vy: Math.random()*0.5-0.25,
                r: Math.random()*2+1
            });
        }

        function drawBg() {
            ctx.clearRect(0,0,w,h);
            const isLight = document.body.classList.contains('light-mode');
            const color = isLight ? '74,144,226' : '255,215,0';
            ctx.fillStyle = `rgba(${color}, 0.6)`;
            particles.forEach(p => {
                p.x += p.vx; p.y += p.vy;
                if(p.x<0) p.x=w; if(p.x>w) p.x=0;
                if(p.y<0) p.y=h; if(p.y>h) p.y=0;
                ctx.beginPath(); ctx.arc(p.x, p.y, p.r, 0, Math.PI*2); ctx.fill();
            });
            requestAnimationFrame(drawBg);
        }
        drawBg();

        // --- Ù„Ø§Ø¬ÛŒÚ© Ù…Ù†Ùˆ Ùˆ ØªÙ… ---
        const hamburger = document.getElementById('hamburger');
        const sideMenu = document.getElementById('side-menu');
        const backdrop = document.getElementById('menu-backdrop');
        const closeBtn = document.getElementById('menu-close');
        const themeBtn = document.getElementById('theme-toggle');

        hamburger.onclick = () => { sideMenu.classList.add('open'); backdrop.classList.add('visible'); };
        closeBtn.onclick = () => { sideMenu.classList.remove('open'); backdrop.classList.remove('visible'); };
        backdrop.onclick = closeBtn.onclick;

        themeBtn.onclick = () => {
            document.body.classList.toggle('light-mode');
            const isLight = document.body.classList.contains('light-mode');
            themeBtn.innerHTML = isLight ? '<i class="fas fa-moon"></i>' : '<i class="fas fa-sun"></i>';
            localStorage.setItem('theme', isLight ? 'light' : 'dark');
        };

        // Ø§Ø¹Ù…Ø§Ù„ ØªÙ… Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡
        if(localStorage.getItem('theme') === 'light') {
            document.body.classList.add('light-mode');
            themeBtn.innerHTML = '<i class="fas fa-moon"></i>';
        }

        // --- Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù†Ù‡Ø§ÛŒÛŒ ---
        window.addEventListener('DOMContentLoaded', async () => {
            await Promise.all([
                loadComponent('hero-root', 'components/hero.html'),
                loadComponent('cards-root', 'about/about.html')
            ]);
            setTimeout(() => {
                document.getElementById('loading-overlay').classList.add('hidden');
            }, 500);
        });
    </script>
</body>
</html>
